/*RevolutioN Load Functions

Este arquivo faz parte do RevolutioN Include Stuff
Favor não utilizar sem autorização
*/
#include <a_samp>

enum InC {
	cid,
	mid,
	Float:cx,
	Float:cy,
	Float:cz,
	Float:cang,
	c1,
	c2,
	cgas,
	cdono[256],
};

new LASTID;
new InitialCars[145][InC] = {
	{1, 510, -133.076202, 1183.266601, 19.256000, 89.113296, 3, 3, -1, "Governo"},
	{2, 481, -133.168792, 1181.574707, 19.256700, 89.002700, 0, 1, -1, "Governo"},
	{3, 481, -133.916000, 1185.494873, 19.258100, 91.369903, 0, 1, -1, "Governo"},
	{4, 509, -133.339492, 1179.091552, 19.258399, 96.434700, 2, 2, -1, "Governo"},
	{5, 582, -314.851104, 1513.966552, 75.415000, 179.137893, 56, 123, -1, "Governo"},
	{6, 508, -101.333396, 1222.525512, 20.115200, 359.171386, 1, 1, -1, "Governo"},
	{7, 461, -318.073608, 845.399902, 13.826899, 266.108184, 3, 0, -1, "Governo"},
	{8, 478, -316.959594, 879.196777, 9.272800, 270.260314, 23, 84, -1, "Governo"},
	{9, 420, -176.798080, 1217.122314, 19.521537, 271.770660, 6, 6, -1, "Governo"},
	{10, 420, -199.354995, 1223.059204, 19.522100, 180.671295, 6, 6, -1, "Governo"},
	{11, 420, -177.869995, 1225.357543, 19.521499, 270.010498, 6, 6, -1, "Governo"},
	{12, 561, 10.517000, 1233.065185, 19.535200, 90.326103, 102, 102, -1, "Governo"},
	{13, 500, -303.275085, 1027.888427, 19.784299, 91.291297, 20, 20, -1, "Governo"},
	{14, 463, -303.831604, 1015.912170, 19.780399, 89.483001, 2, 2, -1, "Governo"},
	{15, 461, -81.122703, 1115.665405, 19.518899, 87.380996, 1, 1, -1, "Governo"},
	{16, 561, -77.564102, 1076.628295, 19.514299, 180.345901, 0, 0, -1, "Governo"},
	{17, 400, -362.165100, 1182.235961, 19.929300, 224.531402, 23, 23, -1, "Governo"},
	{18, 400, -358.587707, 1185.930786, 19.935899, 227.449096, 23, 23, -1, "Governo"},
	{19, 567, -155.644393, 1082.245117, 19.933900, 183.054000, 0, 83, -1, "Governo"},
	{20, 523, -211.897598, 974.655212, 18.716600, 268.069213, 0, 0, -1, "Governo"},
	{21, 523, -212.121994, 978.261108, 18.877500, 271.520294, 0, 0, -1, "Governo"},
	{22, 599, -211.571899, 984.433776, 19.543100, 271.443115, 1, 1, -1, "Governo"},
	{23, 599, -211.478302, 988.590087, 19.153299, 269.689086, 0, 1, -1, "Governo"},
	{24, 599, -211.588699, 992.071105, 19.702699, 269.693695, 0, 1, -1, "Governo"},
	{25, 599, -211.482406, 995.685485, 19.773199, 268.739807, 0, 1, -1, "Governo"},
	{26, 599, -211.225997, 999.431701, 19.848699, 268.986694, 0, 83, -1, "Governo"},
	{27, 475, -147.152893, 1114.460449, 19.475700, 359.689208, 6, 6, -1, "Governo"},
	{28, 475, -147.759094, 1126.978515, 19.606000, 1.269400, 6, 6, -1, "Governo"},
	{29, 475, -141.569793, 1114.804321, 19.600400, 358.442504, 6, 6, -1, "Governo"},
	{30, 521, -137.799392, 1127.895263, 19.318099, 59.522201, 6, 6, -1, "Governo"},
	{31, 525, -85.164596, 1133.307373, 19.619300, 180.386596, 18, 20, -1, "Governo"},
	{32, 525, -80.236801, 1122.400756, 19.619300, 90.282501, 18, 20, -1, "Governo"},
	{33, 416, -328.567504, 1063.751342, 19.890300, 267.435211, 1, 3, -1, "Governo"},
	{34, 416, -336.856506, 1063.847778, 19.443700, 269.967407, 1, 3, -1, "Governo"},
	{35, 453, -2205.816406, 2426.204345, 0.115800, 313.666107, 70, 70, -1, "Governo"},
	{36, 453, -653.127319, 865.865722, -0.383100, 165.778198, 56, 56, -1, "Governo"},
	{37, 453, -646.492675, 862.650695, -0.314599, 171.678298, 56, 56, -1, "Governo"},
	{38, 463, -93.967102, 1222.920532, 19.343700, 3.135400, -1, -1, -1, "Governo"},
	{39, 406, 831.412292, 838.706115, 11.811400, 10.736399, 27, 27, -1, "Governo"},
	{40, 406, 825.001708, 835.902221, 11.305600, 28.680599, 27, 27, -1, "Governo"},
	{41, 448, 173.559295, 1171.103759, 14.908399, 146.264205, 3, 6, -1, "Governo"},
	{42, 448, 177.252502, 1168.539672, 14.907400, 145.635803, 3, 6, -1, "Governo"},
	{43, 428, 2587.106933, 1968.518920, 10.359999, 359.434997, 2, 125, -1, "Governo"},
	{44, 428, 2578.875488, 1979.806884, 10.359499, 269.677490, 2, 125, -1, "Governo"},
	{45, 428, 2578.161376, 1991.986450, 10.363400, 268.570007, 2, 125, -1, "Governo"},
	{46, 599, 2273.729003, 2477.245117, 10.946299, 180.650604, 0, 1, -1, "Governo"},
	{47, 599, 2277.792968, 2442.523681, 10.945099, 0.291900, 0, 1, -1, "Governo"},
	{48, 523, 2294.301269, 2453.666748, 10.944600, 89.666603, 0, 0, -1, "Governo"},
	{49, 523, 2292.391601, 2450.480957, 10.941699, 90.994796, 0, 0, -1, "Governo"},
	{50, 562, 2103.244384, 2059.276367, 10.947500, 88.943496, 25, 25, -1, "Governo"},
	{51, 567, 2103.133300, 2085.616210, 10.943900, 89.468002, 111, 111, -1, "Governo"},
	{52, 506, 2185.950683, 1979.280151, 10.944899, 92.255897, 3, 3, -1, "Governo"},
	{53, 445, 2171.508789, 1996.455688, 10.943900, 268.689392, 1, 1, -1, "Governo"},
	{54, 420, 2075.194335, 1679.283935, 10.795299, 178.524993, 6, 1, -1, "Governo"},
	{55, 420, 2039.731079, 1017.703186, 10.796400, 175.088195, 6, 1, -1, "Governo"},
	{56, 420, 2040.359375, 1028.613403, 10.795599, 179.278198, 6, 1, -1, "Governo"},
	{57, 475, 2040.110595, 1008.944885, 10.795399, 179.274505, 16, 16, -1, "Governo"},
	{58, 461, 2074.684814, 1089.237182, 10.796400, 358.691497, 3, 3, -1, "Governo"},
	{59, 519, 1387.301269, 1771.201293, 10.944499, 270.798187, 0, 0, -1, "Governo"},
	{60, 487, 1574.167358, 1554.853027, 10.948599, 145.082794, 3, 1, -1, "Governo"},
	{61, 603, 1679.273193, 1307.261474, 10.946200, 359.550994, 16, 3, -1, "Governo"},
	{62, 416, 1601.966552, 1830.558593, 10.969200, 179.676696, 6, 3, -1, "Governo"},
	{63, 416, 1609.570434, 1849.050415, 10.969400, 180.194793, 6, 3, -1, "Governo"},
	{64, 562, 2303.051025, 1473.033325, 10.404899, 269.838714, 2, 2, -1, "Governo"},
	{65, 475, 2398.910644, 1667.688720, 10.404899, 358.992401, 0, 0, -1, "Governo"},
	{66, 507, 2046.568481, 2468.064697, 10.396200, 0.073700, 108, 108, -1, "Governo"},
	{67, 500, 1886.098510, 2241.978515, 10.417799, 359.547698, 72, 72, -1, "Governo"},
	{68, 536, 1534.236938, 2212.833496, 10.405400, 1.682700, 125, 125, -1, "Governo"},
	{69, 599, 1599.505615, -1700.436523, 5.453800, 89.735496, 1, 0, -1, "Governo"},
	{70, 599, 1601.366088, -1687.360229, 5.468200, 90.623298, 1, 0, -1, "Governo"},
	{71, 523, 1586.212646, -1667.521240, 5.477700, 268.581207, 0, 0, -1, "Governo"},
	{72, 487, 1557.249511, -1609.458984, 12.960700, 267.878814, 1, 0, -1, "Governo"},
	{73, 420, 1472.636718, -1740.064208, 13.128299, 89.928596, 6, 1, -1, "Governo"},
	{74, 509, 1733.351074, -1750.235839, 13.104100, 359.022705, 3, 3, -1, "Governo"},
	{75, 510, 1735.050292, -1749.806030, 13.106100, 2.931400, 2, 2, -1, "Governo"},
	{76, 481, 1730.689208, -1749.807373, 13.105400, 0.210700, 0, 0, -1, "Governo"},
	{77, 461, 1946.361450, -1794.353515, 13.130700, 265.466094, 10, 10, -1, "Governo"},
	{78, 408, -1903.957275, -1705.312744, 21.814554, 181.019424, 0, 0, -1, "Governo"},
	{79, 408, -1914.727905, -1706.301147, 21.806739, 182.822128, 0, 0, -1, "Governo"},
	{80, 408, -1909.214721, -1705.509765, 22.294391, 181.800033, 0, 0, -1, "Governo"},
	{81, 519, 1564.318725, -2455.838623, 13.139300, 176.785995, 0, 0, -1, "Governo"},
	{82, 487, 1921.162597, -2292.661132, 13.114100, 273.211395, 1, 3, -1, "Governo"},
	{83, 593, 1821.021972, -2622.981201, 13.131600, 4.200600, 3, 1, -1, "Governo"},
	{84, 492, 2483.046875, -1655.121948, 12.899399, 85.394500, 16, 16, -1, "Governo"},
	{85, 496, 2109.485351, -1782.211181, 12.965900, 178.263198, 61, 61, -1, "Governo"},
	{86, 461, 2095.796386, -1814.149047, 12.965900, 271.438507, 61, 61, -1, "Governo"},
	{87, 416, 1179.347534, -1338.594238, 13.426099, 271.667388, 3, 1, -1, "Governo"},
	{88, 416, 1184.197631, -1324.996826, 13.168899, 3.049400, 3, 1, -1, "Governo"},
	{89, 420, 1630.281738, -1102.963256, 23.492300, 93.080001, 6, 1, -1, "Governo"},
	{90, 420, 1648.524536, -1098.240844, 23.495100, 272.203094, 6, 1, -1, "Governo"},
	{91, 506, 1028.901489, -1054.830932, 31.243499, 172.954299, 0, 0, -1, "Governo"},
	{92, 521, 886.338928, -1391.824218, 12.866200, 91.463302, 6, 6, -1, "Governo"},
	{93, 468, 791.870788, -1847.965698, 7.046000, 212.208297, 6, 6, -1, "Governo"},
	{94, 493, 323.710388, -1907.142333, -0.365000, 176.509506, 2, 2, -1, "Governo"},
	{95, 468, 279.997192, -1875.245605, 1.849400, 3.903800, 6, 6, -1, "Governo"},
	{96, 420, 331.161499, -1515.917236, 35.445301, 139.958801, 6, 1, -1, "Governo"},
	{97, 496, 2399.865478, -2009.893798, 13.183199, 269.224700, 36, 1, -1, "Governo"},
	{98, 521, 2530.267578, -2011.036376, 13.182100, 91.620903, 36, 1, -1, "Governo"},
	{99, 445, 1776.192749, -1911.473022, 13.261300, 358.895385, 0, 0, -1, "Governo"},
	{100, 517, 1798.035400, -1886.225341, 13.257399, 270.316711, 6, 6, -1, "Governo"},
	{101, 531, -1067.307128, -1146.151000, 129.218795, 263.179107, 0, 0, -1, "Governo"},
	{102, 531, -1042.800048, -1113.492065, 129.218795, 172.334899, 0, 0, -1, "Governo"},
	{103, 492, -1062.010986, -1220.594116, 129.218795, 272.714996, 5, 5, -1, "Governo"},
	{104, 487, -1494.828613, 806.708923, 7.329999, 90.683998, 1, 3, -1, "Governo"},
	{105, 487, -1493.818725, 823.258483, 7.329299, 85.596496, 1, 3, -1, "Governo"},
	{106, 523, -1596.270507, 749.212097, -5.515100, 179.023300, 0, 0, -1, "Governo"},
	{107, 523, -1574.398803, 722.413330, -5.515100, 88.711402, 0, 0, -1, "Governo"},
	{108, 599, -1582.414550, 672.940124, 6.915900, 1.378200, 0, 0, -1, "Governo"},
	{109, 599, -1616.675537, 652.094421, 6.914599, 359.066192, 0, 0, -1, "Governo"},
	{110, 517, -2214.415039, 615.919067, 34.891143, 0.863229, 0, 0, -1, "Governo"},
	{111, 517, -2221.228759, 609.798034, 34.894775, 267.575042, 0, 0, -1, "Governo"},
	{112, 461, -2179.486083, 605.130798, 34.895198, 88.596977, 0, 0, -1, "Governo"},
	{113, 461, -2179.404296, 608.762268, 34.891155, 90.874336, 0, 0, -1, "Governo"},
	{114, 481, -1765.681884, 941.457519, 24.617599, 4.079500, 0, 0, -1, "Governo"},
	{115, 510, -1761.989746, 941.167480, 24.617700, 1.695299, 3, 3, -1, "Governo"},
	{116, 509, -1755.514160, 941.682678, 24.617200, 359.996795, 6, 6, -1, "Governo"},
	{117, 416, -2589.389892, 637.857788, 14.814200, 93.143402, 1, 3, -1, "Governo"},
	{118, 416, -2570.526367, 632.382385, 14.808300, 91.512199, 1, 3, -1, "Governo"},
	{119, 496, -2543.841064, 610.922485, 14.811599, 268.856597, 16, 16, -1, "Governo"},
	{120, 507, -2664.775634, 268.286712, 4.692399, 177.465606, 20, 20, -1, "Governo"},
	{121, 562, -2695.034423, 268.385894, 4.680699, 0.110899, 0, 0, -1, "Governo"},
	{122, 461, -2613.730224, 197.232604, 4.826600, 356.971405, 6, 6, -1, "Governo"},
	{123, 428, -2413.760498, 535.781799, 30.273700, 79.139396, 2, 125, -1, "Governo"},
	{124, 475, -2171.404296, 306.320190, 35.468799, 180.043701, 64, 64, -1, "Governo"},
	{125, 406, -2115.536376, 188.903305, 34.900100, 267.475097, 27, 27, -1, "Governo"},
	{126, 525, -1917.246215, 304.526611, 41.394100, 182.943405, 18, 20, -1, "Governo"},
	{127, 603, -2052.581787, 146.437393, 29.189500, 179.112304, 0, 6, -1, "Governo"},
	{128, 487, -1679.961669, 705.728515, 30.601600, 86.854499, 0, 0, -1, "Governo"},
	{129, 584, -1667.237304, 445.354797, 7.369100, 314.661712, 0, 0, -1, "Governo"},
	{130, 514, -1654.060302, 451.433105, 7.369599, 226.655502, 112, 112, -1, "Governo"},
	{131, 515, 652.455993, 1693.718627, 6.770199, 215.320297, 112, 112, -1, "Governo"},
	{132, 515, 582.489013, 1637.767333, 6.778399, 209.442596, 112, 112, -1, "Governo"},
	{133, 435, 647.535278, 1688.153564, 6.772699, 222.705505, 0, 0, -1, "Governo"},
	{134, 435, 575.594421, 1635.904907, 6.769999, 212.104797, 0, 0, -1, "Governo"},
	{135, 562, -44.134799, -1154.670043, 0.858099, 339.944702, 6, 6, -1, "Governo"},
	{136, 449, -166.667068, 1280.842651, 22.134481, 90.000000, 3, 3, -1, "Governo"},
	{137, 411, -1650.228637, 1208.422119, 13.242253, 234.253128, 6, 6, -1, "Governo"},
	{138, 451, -1659.072753, 1211.353881, 13.248593, 280.820220, 3, 3, -1, "Governo"},
	{139, 560, -1665.084350, 1224.206298, 13.245696, 224.815002, 1, 1, -1, "Governo"},
	{140, 475, -1661.336547, 1217.516845, 13.238395, 266.254119, 16, 16, -1, "Governo"},
	{141, 603, -1671.374023, 1205.481323, 13.233024, 264.305145, 86, 86, -1, "Governo"},
	{142, 409, -1658.946655, 1216.560180, 20.722682, 220.827621, 0, 0, -1, "Governo"},
	{143, 461, -1658.665283, 1204.336669, 20.727069, 21.906820, 3, 3, -1, "Governo"},
	{144, 521, -1657.352050, 1204.723632, 20.725559, 23.642450, 0, 0, -1, "Governo"},
	{145, 463, -1656.131225, 1205.181396, 20.723922, 25.559400, 6, 6, -1, "Governo"}
};

stock CarregarCarros()
{
	new tmp[256], tmp2[256], query[256], id=1, field[128], field2[128], ct;
	new id, modelid,Float:x,Float:y,Float:z,Float:ang,cor1,cor2,don[MAX_PLAYER_NAME],gaso;
	format(query,sizeof query,"SELECT id,modelid,x,y,z,ang,cor1,cor2,dono,gasolina FROM cars ORDER BY id");
	if(samp_mysql_query(string) == 0) print("Erro na Query da função CarregarCarros");
 	while(samp_mysql_fetch_row(resultline)==1)
	{
		samp_mysql_strtok(field, "|", resultline); //first call of strtok MUST contain resultline
		id = strval(field);
		while(samp_mysql_strtok(field2, "|", "")==1) {//From 2nd call to the end you MUST call strtok without resultline
		    ct++;
		    ct%=9;
		    if(contador == 1) modelid = strval(field2);
			if(contador == 2) x = Float:floatstr(field2);
			if(contador == 3) y = Float:floatstr(field2);
			if(contador == 4) z = Float:floatstr(field2);
			if(contador == 5) ang = Float:floatstr(field2);
			if(contador == 6) cor1 = strval(field2);
			if(contador == 7) cor2 = strval(field2);
			if(contador == 8) set(don,field2);
			if(contador == 0) gaso = strval(field2);
		}
		switch(modelid) {
		    case 481,509,510,594,599,523: GPV[id]=-1;
			default: GPV[id] = gaso;
		}
		CreateVehicle(modelid,x,y,z,ang,cor1,cor2,-1);
	}
	if(!id)) {
	    print("Não há nenhum carro nesse servidor, os carros serão automaticamente gerados");
	    GerarCarrosIniciais();
	    return 0;
	}
	LASTID = id;
	tmp = "1.vinfo";
	while(fexist(tmp)) {
		CarregarCarro(id);
		id++;
		format(tmp,256,"%d.vinfo",id);
	}
	return 1;
}

stock GerarCarrosIniciais()	for(new c=1; c<146; c++) CriarDocumentacao(InitialCars[c][mid],InitialCars[c][cx],InitialCars[c][cy],InitialCars[c][cz],InitialCars[c][cang],InitialCars[c][c1],InitialCars[c][c2],InitialCars[c][cgas],InitialCars[c][cdono]);

stock CarregarCarro(carid)
{
	new tmp[256];
	format(tmp,256,"%d.vinfo",carid);
	if(!fexist(tmp)) return 1;
	new id,Float:x,Float:y,Float:z,Float:ang,cor1,cor2;
	id = dini_Int(tmp,"modelo");
	x = dini_Float(tmp,"x");
	y = dini_Float(tmp,"y");
	z = dini_Float(tmp,"z");
	ang = dini_Float(tmp,"ang");
	cor1 = dini_Int(tmp,"c1");
	cor2 = dini_Int(tmp,"c2");
	GPV[carid] = dini_Int(tmp,"gas");
	Dono[carid] = dini_Get(tmp,"dono");
	CreateVehicle(id,x,y,z,ang,cor1,cor2,-1);
	return 1;
}

public CarregarTuning(carid)
{
    new resultline[1024];
	new query[256], contador;
	new field[128], field2[128],tu[18]
	new id,pintura,t1,t2,t3,t4,t5,t6,t7,t8,t9,t10,t11,t12,t13,t14,t15,t16,t17;
	format(query,sizeof query,"SELECT pintura,t1,t2,t3,t4,t5,t6,t7,t8,t9,t10,t11,t12,t13,t14,t15,t16,t17 FROM cars WHERE id = %d", carid);
	if(samp_mysql_query(query) == 0) printf("Erro na query CarregarTuning include load.own");
	samp_mysql_store_result();
	while(samp_mysql_fetch_row(resultline)==1)
	{
		samp_mysql_strtok(field, "|", resultline); //first call of strtok MUST contain resultline
		tu[0] = strval(field);
		while(samp_mysql_strtok(field2, "|", "")==1) //From 2nd call to the end you MUST call strtok without resultline
		{
			contador++;
			tu[contador] = strval(field2);
		}
		for(new ct; ct<18; ct++) {
		    if(ct==0) if(tu[ct] != 0) ChangeVehiclePaintjob(vehicleid, tu[ct]);
		    else AddVehicleComponent(vehicleid, tu[ct]);
		}
	}
	return 1;
}

stock PRIV_FWI(carid)
{
	new tmp[256];
	format(tmp,256,"id = %d",carid);
	return tmp;
}

public CarregarPlaca(carid)
{
	new placa[256];
	placa = PRIV_sqlget("cars","placa",FWI(carid));
	if(placa[0] != 0){
        SetVehicleNumberPlate(vehicleid, placa);
        SetVehicleToRespawn(vehicleid);
    }
}
stock CarregarTuningTodos(){
	new pattern[256] = "1.vinfo";
	new contagem = 1;
	while(fexist(pattern)){
	    ApplyTuningForVehicle(contagem);
	    contagem++;
	    format(pattern,256,"%d.vinfo",contagem);
	}
}

public CriarDocumentacao(id,Float:x,Float:y,Float:z,Float:ang,cor1,cor2,gas,dono[])
{
	new cid = CreateVehicle(id,x,y,z,ang,cor1,cor2,-1);
	new insq[256];
	format(insq,sizeof insq,"0,%d,%d,%f,%f,%f,%f,%d,%d,'%s ','%s ',gas,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0",cid,id,x,y,z,ang,cor1,cor2,dono,placa,gas);
	dini_Create(tmp);
	dini_IntSet(tmp,"modelo",id);
	dini_FloatSet(tmp,"x",x);
	dini_FloatSet(tmp,"y",y);
	dini_FloatSet(tmp,"z",z);
	dini_FloatSet(tmp,"ang",ang);
	dini_IntSet(tmp,"c1",cor1);
	dini_IntSet(tmp,"c2",cor2);
	dini_IntSet(tmp,"gas",gas);
	dini_Set(tmp,"dono",dono);
	return 1;
}

public blabla() CarregarCarros();
